{"ast":null,"code":"import _objectSpread from\"/Users/darthvader/Project/MentorPortal/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';import{goalsService}from'../services/goalsService';import{tasksService}from'../services/tasksService';import TaskList from'../components/TaskList';import TaskForm from'../components/TaskForm';import GoalForm from'../components/GoalForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GoalDetailPage=()=>{const{id}=useParams();const navigate=useNavigate();const{user,logout}=useAuth();const[goal,setGoal]=useState(null);const[tasks,setTasks]=useState([]);const[isLoading,setIsLoading]=useState(true);const[showTaskForm,setShowTaskForm]=useState(false);const[showGoalForm,setShowGoalForm]=useState(false);useEffect(()=>{if(id){loadData();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[id]);const loadData=async()=>{try{const[goalData,tasksData]=await Promise.all([goalsService.getById(Number(id)),tasksService.getByGoalId(Number(id))]);setGoal(goalData);setTasks(tasksData);}catch(error){console.error('Failed to load data:',error);}finally{setIsLoading(false);}};const handleCreateTask=async data=>{try{await tasksService.create(Number(id),data);await loadData();setShowTaskForm(false);}catch(error){console.error('Failed to create task:',error);throw error;}};const handleUpdateTask=async(taskId,data)=>{try{await tasksService.update(taskId,data);await loadData();}catch(error){console.error('Failed to update task:',error);throw error;}};const handleDeleteTask=async taskId=>{if(window.confirm('Are you sure you want to delete this task?')){try{await tasksService.delete(taskId);await loadData();}catch(error){console.error('Failed to delete task:',error);}}};const handleUpdateGoal=async data=>{if(!goal)return;try{await goalsService.update(goal.id,_objectSpread(_objectSpread({},data),{},{status:goal.status}));await loadData();setShowGoalForm(false);}catch(error){console.error('Failed to update goal:',error);throw error;}};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(!goal){return/*#__PURE__*/_jsx(\"div\",{children:\"Goal not found\"});}return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'1000px',margin:'0 auto',padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/goals'),children:\"\\u2190 Back to Goals\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{style:{marginRight:'15px'},children:[\"Hello, \",user===null||user===void 0?void 0:user.fullName]}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,children:\"Logout\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'30px',padding:'20px',border:'1px solid #ddd',borderRadius:'8px'},children:showGoalForm?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Goal\"}),/*#__PURE__*/_jsx(GoalForm,{onSubmit:handleUpdateGoal,onCancel:()=>setShowGoalForm(false),initialData:{title:goal.title,description:goal.description}})]}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'start'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:goal.title}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#666'},children:goal.description||'No description'})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowGoalForm(true),children:\"Edit Goal\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Tasks\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowTaskForm(!showTaskForm),children:showTaskForm?'Cancel':'Add Task'})]}),showTaskForm&&/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'20px',padding:'15px',border:'1px solid #ddd',borderRadius:'5px'},children:/*#__PURE__*/_jsx(TaskForm,{onSubmit:handleCreateTask,onCancel:()=>setShowTaskForm(false)})}),/*#__PURE__*/_jsx(TaskList,{tasks:tasks,onUpdate:handleUpdateTask,onDelete:handleDeleteTask})]})]});};export default GoalDetailPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useAuth","goalsService","tasksService","TaskList","TaskForm","GoalForm","jsx","_jsx","jsxs","_jsxs","GoalDetailPage","id","navigate","user","logout","goal","setGoal","tasks","setTasks","isLoading","setIsLoading","showTaskForm","setShowTaskForm","showGoalForm","setShowGoalForm","loadData","goalData","tasksData","Promise","all","getById","Number","getByGoalId","error","console","handleCreateTask","data","create","handleUpdateTask","taskId","update","handleDeleteTask","window","confirm","delete","handleUpdateGoal","_objectSpread","status","children","style","maxWidth","margin","padding","display","justifyContent","alignItems","marginBottom","onClick","marginRight","fullName","border","borderRadius","onSubmit","onCancel","initialData","title","description","color","onUpdate","onDelete"],"sources":["/Users/darthvader/Project/MentorPortal/frontend/src/pages/GoalDetailPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { goalsService } from '../services/goalsService';\nimport { tasksService } from '../services/tasksService';\nimport { Goal, Task, CreateTaskDto, UpdateTaskDto } from '../types';\nimport TaskList from '../components/TaskList';\nimport TaskForm from '../components/TaskForm';\nimport GoalForm from '../components/GoalForm';\n\nconst GoalDetailPage: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const { user, logout } = useAuth();\n  const [goal, setGoal] = useState<Goal | null>(null);\n  const [tasks, setTasks] = useState<Task[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [showTaskForm, setShowTaskForm] = useState(false);\n  const [showGoalForm, setShowGoalForm] = useState(false);\n\n  useEffect(() => {\n    if (id) {\n      loadData();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n\n  const loadData = async () => {\n    try {\n      const [goalData, tasksData] = await Promise.all([\n        goalsService.getById(Number(id)),\n        tasksService.getByGoalId(Number(id!)),\n      ]);\n      setGoal(goalData);\n      setTasks(tasksData);\n    } catch (error) {\n      console.error('Failed to load data:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleCreateTask = async (data: CreateTaskDto) => {\n    try {\n      await tasksService.create(Number(id!), data);\n      await loadData();\n      setShowTaskForm(false);\n    } catch (error) {\n      console.error('Failed to create task:', error);\n      throw error;\n    }\n  };\n\n  const handleUpdateTask = async (taskId: number, data: UpdateTaskDto) => {\n    try {\n      await tasksService.update(taskId, data);\n      await loadData();\n    } catch (error) {\n      console.error('Failed to update task:', error);\n      throw error;\n    }\n  };\n\n  const handleDeleteTask = async (taskId: number) => {\n    if (window.confirm('Are you sure you want to delete this task?')) {\n      try {\n        await tasksService.delete(taskId);\n        await loadData();\n      } catch (error) {\n        console.error('Failed to delete task:', error);\n      }\n    }\n  };\n\n  const handleUpdateGoal = async (data: { title: string; description: string }) => {\n    if (!goal) return;\n    try {\n      await goalsService.update(goal.id, {\n        ...data,\n        status: goal.status,\n      });\n      await loadData();\n      setShowGoalForm(false);\n    } catch (error) {\n      console.error('Failed to update goal:', error);\n      throw error;\n    }\n  };\n\n  if (isLoading) {\n    return <div>Loading...</div>;\n  }\n\n  if (!goal) {\n    return <div>Goal not found</div>;\n  }\n\n  return (\n    <div style={{ maxWidth: '1000px', margin: '0 auto', padding: '20px' }}>\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\n        <button onClick={() => navigate('/goals')}>‚Üê Back to Goals</button>\n        <div>\n          <span style={{ marginRight: '15px' }}>Hello, {user?.fullName}</span>\n          <button onClick={logout}>Logout</button>\n        </div>\n      </div>\n\n      <div style={{ marginBottom: '30px', padding: '20px', border: '1px solid #ddd', borderRadius: '8px' }}>\n        {showGoalForm ? (\n          <div>\n            <h2>Edit Goal</h2>\n            <GoalForm\n              onSubmit={handleUpdateGoal}\n              onCancel={() => setShowGoalForm(false)}\n              initialData={{ title: goal.title, description: goal.description }}\n            />\n          </div>\n        ) : (\n          <div>\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start' }}>\n              <div>\n                <h1>{goal.title}</h1>\n                <p style={{ color: '#666' }}>{goal.description || 'No description'}</p>\n              </div>\n              <button onClick={() => setShowGoalForm(true)}>Edit Goal</button>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <div style={{ marginBottom: '20px' }}>\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n          <h2>Tasks</h2>\n          <button onClick={() => setShowTaskForm(!showTaskForm)}>\n            {showTaskForm ? 'Cancel' : 'Add Task'}\n          </button>\n        </div>\n\n        {showTaskForm && (\n          <div style={{ marginBottom: '20px', padding: '15px', border: '1px solid #ddd', borderRadius: '5px' }}>\n            <TaskForm\n              onSubmit={handleCreateTask}\n              onCancel={() => setShowTaskForm(false)}\n            />\n          </div>\n        )}\n\n        <TaskList\n          tasks={tasks}\n          onUpdate={handleUpdateTask}\n          onDelete={handleDeleteTask}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default GoalDetailPage;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}