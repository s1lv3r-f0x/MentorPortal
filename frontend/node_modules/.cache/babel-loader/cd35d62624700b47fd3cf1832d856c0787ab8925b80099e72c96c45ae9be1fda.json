{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';import{goalsService}from'../services/goalsService';import GoalCard from'../components/GoalCard';import GoalForm from'../components/GoalForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GoalsPage=()=>{const[goals,setGoals]=useState([]);const[isLoading,setIsLoading]=useState(true);const[showForm,setShowForm]=useState(false);const{user,logout}=useAuth();const navigate=useNavigate();useEffect(()=>{loadGoals();},[]);const loadGoals=async()=>{try{const data=await goalsService.getAll();setGoals(data);}catch(error){console.error('Failed to load goals:',error);}finally{setIsLoading(false);}};const handleCreateGoal=async data=>{try{await goalsService.create(data);await loadGoals();setShowForm(false);}catch(error){console.error('Failed to create goal:',error);throw error;}};const handleDeleteGoal=async id=>{if(window.confirm('Are you sure you want to delete this goal?')){try{await goalsService.delete(id);await loadGoals();}catch(error){console.error('Failed to delete goal:',error);}}};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'1200px',margin:'0 auto',padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Goals\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{style:{marginRight:'15px'},children:[\"Hello, \",user===null||user===void 0?void 0:user.fullName]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/reviews'),style:{marginRight:'10px'},children:\"Reviews\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(!showForm),style:{marginRight:'10px'},children:showForm?'Cancel':'New Goal'}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,children:\"Logout\"})]})]}),showForm&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px',padding:'20px',border:'1px solid #ccc',borderRadius:'5px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create New Goal\"}),/*#__PURE__*/_jsx(GoalForm,{onSubmit:handleCreateGoal,onCancel:()=>setShowForm(false)})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(300px, 1fr))',gap:'20px'},children:goals.map(goal=>/*#__PURE__*/_jsx(GoalCard,{goal:goal,onView:()=>navigate(\"/goals/\".concat(goal.id)),onDelete:()=>handleDeleteGoal(goal.id)},goal.id))}),goals.length===0&&!showForm&&/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'40px'},children:[/*#__PURE__*/_jsx(\"p\",{children:\"No goals yet. Create your first goal!\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(true),children:\"Create Goal\"})]})]});};export default GoalsPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useAuth","goalsService","GoalCard","GoalForm","jsx","_jsx","jsxs","_jsxs","GoalsPage","goals","setGoals","isLoading","setIsLoading","showForm","setShowForm","user","logout","navigate","loadGoals","data","getAll","error","console","handleCreateGoal","create","handleDeleteGoal","id","window","confirm","delete","children","style","maxWidth","margin","padding","display","justifyContent","alignItems","marginBottom","marginRight","fullName","onClick","border","borderRadius","onSubmit","onCancel","gridTemplateColumns","gap","map","goal","onView","concat","onDelete","length","textAlign"],"sources":["/Users/darthvader/Project/MentorPortal/frontend/src/pages/GoalsPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { goalsService } from '../services/goalsService';\nimport { Goal, CreateGoalDto } from '../types';\nimport GoalCard from '../components/GoalCard';\nimport GoalForm from '../components/GoalForm';\n\nconst GoalsPage: React.FC = () => {\n  const [goals, setGoals] = useState<Goal[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [showForm, setShowForm] = useState(false);\n  const { user, logout } = useAuth();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    loadGoals();\n  }, []);\n\n  const loadGoals = async () => {\n    try {\n      const data = await goalsService.getAll();\n      setGoals(data);\n    } catch (error) {\n      console.error('Failed to load goals:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleCreateGoal = async (data: CreateGoalDto) => {\n    try {\n      await goalsService.create(data);\n      await loadGoals();\n      setShowForm(false);\n    } catch (error) {\n      console.error('Failed to create goal:', error);\n      throw error;\n    }\n  };\n\n  const handleDeleteGoal = async (id: number) => {\n    if (window.confirm('Are you sure you want to delete this goal?')) {\n      try {\n        await goalsService.delete(id);\n        await loadGoals();\n      } catch (error) {\n        console.error('Failed to delete goal:', error);\n      }\n    }\n  };\n\n  if (isLoading) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <div style={{ maxWidth: '1200px', margin: '0 auto', padding: '20px' }}>\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\n        <h1>My Goals</h1>\n        <div>\n          <span style={{ marginRight: '15px' }}>Hello, {user?.fullName}</span>\n          <button onClick={() => navigate('/reviews')} style={{ marginRight: '10px' }}>\n            Reviews\n          </button>\n          <button onClick={() => setShowForm(!showForm)} style={{ marginRight: '10px' }}>\n            {showForm ? 'Cancel' : 'New Goal'}\n          </button>\n          <button onClick={logout}>Logout</button>\n        </div>\n      </div>\n\n      {showForm && (\n        <div style={{ marginBottom: '20px', padding: '20px', border: '1px solid #ccc', borderRadius: '5px' }}>\n          <h2>Create New Goal</h2>\n          <GoalForm onSubmit={handleCreateGoal} onCancel={() => setShowForm(false)} />\n        </div>\n      )}\n\n      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))', gap: '20px' }}>\n        {goals.map((goal) => (\n          <GoalCard\n            key={goal.id}\n            goal={goal}\n            onView={() => navigate(`/goals/${goal.id}`)}\n            onDelete={() => handleDeleteGoal(goal.id)}\n          />\n        ))}\n      </div>\n\n      {goals.length === 0 && !showForm && (\n        <div style={{ textAlign: 'center', padding: '40px' }}>\n          <p>No goals yet. Create your first goal!</p>\n          <button onClick={() => setShowForm(true)}>Create Goal</button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default GoalsPage;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}