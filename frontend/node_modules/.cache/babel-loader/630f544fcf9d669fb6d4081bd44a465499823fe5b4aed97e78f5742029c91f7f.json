{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';import{reviewsService}from'../services/reviewsService';import{usersService}from'../services/usersService';import ReviewForm from'../components/ReviewForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ReviewsPage=()=>{const[users,setUsers]=useState([]);const[isLoading,setIsLoading]=useState(true);const{user,logout}=useAuth();const navigate=useNavigate();useEffect(()=>{loadUsers();},[]);const loadUsers=async()=>{try{const data=await usersService.getAll();setUsers(data.filter(u=>u.id!==(user===null||user===void 0?void 0:user.id)));}catch(error){console.error('Failed to load users:',error);}finally{setIsLoading(false);}};const handleCreateReview=async data=>{try{await reviewsService.create(data);alert('Review created successfully!');}catch(error){var _error$response,_error$response$data;alert(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to create review');throw error;}};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'800px',margin:'0 auto',padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Create Review\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{style:{marginRight:'15px'},children:[\"Hello, \",user===null||user===void 0?void 0:user.fullName]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate((user===null||user===void 0?void 0:user.role)==='Mentor'?'/mentor/dashboard':'/goals'),style:{marginRight:'10px'},children:\"Back\"}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,children:\"Logout\"})]})]}),/*#__PURE__*/_jsx(ReviewForm,{users:users,onSubmit:handleCreateReview})]});};export default ReviewsPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useAuth","reviewsService","usersService","ReviewForm","jsx","_jsx","jsxs","_jsxs","ReviewsPage","users","setUsers","isLoading","setIsLoading","user","logout","navigate","loadUsers","data","getAll","filter","u","id","error","console","handleCreateReview","create","alert","_error$response","_error$response$data","response","message","children","style","maxWidth","margin","padding","display","justifyContent","alignItems","marginBottom","marginRight","fullName","onClick","role","onSubmit"],"sources":["/Users/darthvader/Project/MentorPortal/frontend/src/pages/ReviewsPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { reviewsService } from '../services/reviewsService';\nimport { usersService } from '../services/usersService';\nimport { Review, CreateReviewDto, User } from '../types';\nimport ReviewForm from '../components/ReviewForm';\nimport ReviewList from '../components/ReviewList';\n\nconst ReviewsPage: React.FC = () => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const { user, logout } = useAuth();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    loadUsers();\n  }, []);\n\n  const loadUsers = async () => {\n    try {\n      const data = await usersService.getAll();\n      setUsers(data.filter(u => u.id !== user?.id));\n    } catch (error) {\n      console.error('Failed to load users:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleCreateReview = async (data: CreateReviewDto) => {\n    try {\n      await reviewsService.create(data);\n      alert('Review created successfully!');\n    } catch (error: any) {\n      alert(error.response?.data?.message || 'Failed to create review');\n      throw error;\n    }\n  };\n\n  if (isLoading) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <div style={{ maxWidth: '800px', margin: '0 auto', padding: '20px' }}>\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\n        <h1>Create Review</h1>\n        <div>\n          <span style={{ marginRight: '15px' }}>Hello, {user?.fullName}</span>\n          <button onClick={() => navigate(user?.role === 'Mentor' ? '/mentor/dashboard' : '/goals')} style={{ marginRight: '10px' }}>\n            Back\n          </button>\n          <button onClick={logout}>Logout</button>\n        </div>\n      </div>\n\n      <ReviewForm users={users} onSubmit={handleCreateReview} />\n    </div>\n  );\n};\n\nexport default ReviewsPage;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}