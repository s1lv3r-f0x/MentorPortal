{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';import{mentorsService}from'../services/mentorsService';import{tasksService}from'../services/tasksService';import TaskList from'../components/TaskList';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MentorEmployeeGoalsPage=()=>{const{employeeId}=useParams();const navigate=useNavigate();const{user,logout}=useAuth();const[goals,setGoals]=useState([]);const[selectedGoal,setSelectedGoal]=useState(null);const[tasks,setTasks]=useState([]);const[isLoading,setIsLoading]=useState(true);useEffect(()=>{if(employeeId){loadGoals();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[employeeId]);const loadGoals=async()=>{try{const data=await mentorsService.getEmployeeGoals(Number(employeeId));setGoals(data);}catch(error){console.error('Failed to load goals:',error);}finally{setIsLoading(false);}};const loadTasks=async goalId=>{try{const data=await tasksService.getByGoalId(goalId);setTasks(data);}catch(error){console.error('Failed to load tasks:',error);}};const handleGoalClick=async goal=>{setSelectedGoal(goal);await loadTasks(goal.id);};const handleUpdateTask=async(taskId,data)=>{try{await tasksService.update(taskId,data);if(selectedGoal){await loadTasks(selectedGoal.id);}}catch(error){console.error('Failed to update task:',error);throw error;}};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'1200px',margin:'0 auto',padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/mentor/dashboard'),children:\"\\u2190 Back to Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{style:{marginRight:'15px'},children:[\"Hello, \",user===null||user===void 0?void 0:user.fullName]}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,children:\"Logout\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 2fr',gap:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Goals\"}),goals.length===0?/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',textAlign:'center',color:'#666'},children:\"No goals found\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'10px'},children:goals.map(goal=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handleGoalClick(goal),style:{padding:'15px',border:(selectedGoal===null||selectedGoal===void 0?void 0:selectedGoal.id)===goal.id?'2px solid #2196f3':'1px solid #ddd',borderRadius:'5px',cursor:'pointer',backgroundColor:(selectedGoal===null||selectedGoal===void 0?void 0:selectedGoal.id)===goal.id?'#e3f2fd':'#fff'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0},children:goal.title}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#666',fontSize:'12px',margin:'5px 0'},children:[goal.completedTasks,\" / \",goal.totalTasks,\" tasks completed\"]})]},goal.id))})]}),/*#__PURE__*/_jsx(\"div\",{children:selectedGoal?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:selectedGoal.title}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#666'},children:selectedGoal.description||'No description'}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Tasks\"}),/*#__PURE__*/_jsx(TaskList,{tasks:tasks,onUpdate:handleUpdateTask,onDelete:()=>{}})]})]}):/*#__PURE__*/_jsx(\"div\",{style:{padding:'40px',textAlign:'center',color:'#666'},children:\"Select a goal to view details\"})})]})]});};export default MentorEmployeeGoalsPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useAuth","mentorsService","tasksService","TaskList","jsx","_jsx","jsxs","_jsxs","MentorEmployeeGoalsPage","employeeId","navigate","user","logout","goals","setGoals","selectedGoal","setSelectedGoal","tasks","setTasks","isLoading","setIsLoading","loadGoals","data","getEmployeeGoals","Number","error","console","loadTasks","goalId","getByGoalId","handleGoalClick","goal","id","handleUpdateTask","taskId","update","children","style","maxWidth","margin","padding","display","justifyContent","alignItems","marginBottom","onClick","marginRight","fullName","gridTemplateColumns","gap","length","textAlign","color","flexDirection","map","border","borderRadius","cursor","backgroundColor","title","fontSize","completedTasks","totalTasks","description","marginTop","onUpdate","onDelete"],"sources":["/Users/darthvader/Project/MentorPortal/frontend/src/pages/MentorEmployeeGoalsPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { mentorsService } from '../services/mentorsService';\nimport { tasksService } from '../services/tasksService';\nimport { Goal, Task, UpdateTaskDto } from '../types';\nimport TaskList from '../components/TaskList';\n\nconst MentorEmployeeGoalsPage: React.FC = () => {\n  const { employeeId } = useParams<{ employeeId: string }>();\n  const navigate = useNavigate();\n  const { user, logout } = useAuth();\n  const [goals, setGoals] = useState<Goal[]>([]);\n  const [selectedGoal, setSelectedGoal] = useState<Goal | null>(null);\n  const [tasks, setTasks] = useState<Task[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    if (employeeId) {\n      loadGoals();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [employeeId]);\n\n  const loadGoals = async () => {\n    try {\n      const data = await mentorsService.getEmployeeGoals(Number(employeeId));\n      setGoals(data);\n    } catch (error) {\n      console.error('Failed to load goals:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const loadTasks = async (goalId: number) => {\n    try {\n      const data = await tasksService.getByGoalId(goalId);\n      setTasks(data);\n    } catch (error) {\n      console.error('Failed to load tasks:', error);\n    }\n  };\n\n  const handleGoalClick = async (goal: Goal) => {\n    setSelectedGoal(goal);\n    await loadTasks(goal.id);\n  };\n\n  const handleUpdateTask = async (taskId: number, data: UpdateTaskDto) => {\n    try {\n      await tasksService.update(taskId, data);\n      if (selectedGoal) {\n        await loadTasks(selectedGoal.id);\n      }\n    } catch (error) {\n      console.error('Failed to update task:', error);\n      throw error;\n    }\n  };\n\n  if (isLoading) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <div style={{ maxWidth: '1200px', margin: '0 auto', padding: '20px' }}>\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\n        <button onClick={() => navigate('/mentor/dashboard')}>‚Üê Back to Dashboard</button>\n        <div>\n          <span style={{ marginRight: '15px' }}>Hello, {user?.fullName}</span>\n          <button onClick={logout}>Logout</button>\n        </div>\n      </div>\n\n      <div style={{ display: 'grid', gridTemplateColumns: '1fr 2fr', gap: '20px' }}>\n        <div>\n          <h2>Goals</h2>\n          {goals.length === 0 ? (\n            <div style={{ padding: '20px', textAlign: 'center', color: '#666' }}>\n              No goals found\n            </div>\n          ) : (\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>\n              {goals.map((goal) => (\n                <div\n                  key={goal.id}\n                  onClick={() => handleGoalClick(goal)}\n                  style={{\n                    padding: '15px',\n                    border: selectedGoal?.id === goal.id ? '2px solid #2196f3' : '1px solid #ddd',\n                    borderRadius: '5px',\n                    cursor: 'pointer',\n                    backgroundColor: selectedGoal?.id === goal.id ? '#e3f2fd' : '#fff',\n                  }}\n                >\n                  <h3 style={{ margin: 0 }}>{goal.title}</h3>\n                  <p style={{ color: '#666', fontSize: '12px', margin: '5px 0' }}>\n                    {goal.completedTasks} / {goal.totalTasks} tasks completed\n                  </p>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        <div>\n          {selectedGoal ? (\n            <div>\n              <h2>{selectedGoal.title}</h2>\n              <p style={{ color: '#666' }}>{selectedGoal.description || 'No description'}</p>\n              <div style={{ marginTop: '20px' }}>\n                <h3>Tasks</h3>\n                <TaskList\n                  tasks={tasks}\n                  onUpdate={handleUpdateTask}\n                  onDelete={() => {}}\n                />\n              </div>\n            </div>\n          ) : (\n            <div style={{ padding: '40px', textAlign: 'center', color: '#666' }}>\n              Select a goal to view details\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MentorEmployeeGoalsPage;\n\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,OAASC,OAAO,KAAQ,wBAAwB,CAChD,OAASC,cAAc,KAAQ,4BAA4B,CAC3D,OAASC,YAAY,KAAQ,0BAA0B,CAEvD,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9C,KAAM,CAAAC,uBAAiC,CAAGA,CAAA,GAAM,CAC9C,KAAM,CAAEC,UAAW,CAAC,CAAGX,SAAS,CAAyB,CAAC,CAC1D,KAAM,CAAAY,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEY,IAAI,CAAEC,MAAO,CAAC,CAAGZ,OAAO,CAAC,CAAC,CAClC,KAAM,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAAGlB,QAAQ,CAAS,EAAE,CAAC,CAC9C,KAAM,CAACmB,YAAY,CAAEC,eAAe,CAAC,CAAGpB,QAAQ,CAAc,IAAI,CAAC,CACnE,KAAM,CAACqB,KAAK,CAAEC,QAAQ,CAAC,CAAGtB,QAAQ,CAAS,EAAE,CAAC,CAC9C,KAAM,CAACuB,SAAS,CAAEC,YAAY,CAAC,CAAGxB,QAAQ,CAAC,IAAI,CAAC,CAEhDC,SAAS,CAAC,IAAM,CACd,GAAIY,UAAU,CAAE,CACdY,SAAS,CAAC,CAAC,CACb,CACA;AACF,CAAC,CAAE,CAACZ,UAAU,CAAC,CAAC,CAEhB,KAAM,CAAAY,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAArB,cAAc,CAACsB,gBAAgB,CAACC,MAAM,CAACf,UAAU,CAAC,CAAC,CACtEK,QAAQ,CAACQ,IAAI,CAAC,CAChB,CAAE,MAAOG,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC/C,CAAC,OAAS,CACRL,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,KAAM,CAAAO,SAAS,CAAG,KAAO,CAAAC,MAAc,EAAK,CAC1C,GAAI,CACF,KAAM,CAAAN,IAAI,CAAG,KAAM,CAAApB,YAAY,CAAC2B,WAAW,CAACD,MAAM,CAAC,CACnDV,QAAQ,CAACI,IAAI,CAAC,CAChB,CAAE,MAAOG,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC/C,CACF,CAAC,CAED,KAAM,CAAAK,eAAe,CAAG,KAAO,CAAAC,IAAU,EAAK,CAC5Cf,eAAe,CAACe,IAAI,CAAC,CACrB,KAAM,CAAAJ,SAAS,CAACI,IAAI,CAACC,EAAE,CAAC,CAC1B,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAG,KAAAA,CAAOC,MAAc,CAAEZ,IAAmB,GAAK,CACtE,GAAI,CACF,KAAM,CAAApB,YAAY,CAACiC,MAAM,CAACD,MAAM,CAAEZ,IAAI,CAAC,CACvC,GAAIP,YAAY,CAAE,CAChB,KAAM,CAAAY,SAAS,CAACZ,YAAY,CAACiB,EAAE,CAAC,CAClC,CACF,CAAE,MAAOP,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9C,KAAM,CAAAA,KAAK,CACb,CACF,CAAC,CAED,GAAIN,SAAS,CAAE,CACb,mBAAOd,IAAA,QAAA+B,QAAA,CAAK,YAAU,CAAK,CAAC,CAC9B,CAEA,mBACE7B,KAAA,QAAK8B,KAAK,CAAE,CAAEC,QAAQ,CAAE,QAAQ,CAAEC,MAAM,CAAE,QAAQ,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAJ,QAAA,eACpE7B,KAAA,QAAK8B,KAAK,CAAE,CAAEI,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,eAAe,CAAEC,UAAU,CAAE,QAAQ,CAAEC,YAAY,CAAE,MAAO,CAAE,CAAAR,QAAA,eAC3G/B,IAAA,WAAQwC,OAAO,CAAEA,CAAA,GAAMnC,QAAQ,CAAC,mBAAmB,CAAE,CAAA0B,QAAA,CAAC,0BAAmB,CAAQ,CAAC,cAClF7B,KAAA,QAAA6B,QAAA,eACE7B,KAAA,SAAM8B,KAAK,CAAE,CAAES,WAAW,CAAE,MAAO,CAAE,CAAAV,QAAA,EAAC,SAAO,CAACzB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEoC,QAAQ,EAAO,CAAC,cACpE1C,IAAA,WAAQwC,OAAO,CAAEjC,MAAO,CAAAwB,QAAA,CAAC,QAAM,CAAQ,CAAC,EACrC,CAAC,EACH,CAAC,cAEN7B,KAAA,QAAK8B,KAAK,CAAE,CAAEI,OAAO,CAAE,MAAM,CAAEO,mBAAmB,CAAE,SAAS,CAAEC,GAAG,CAAE,MAAO,CAAE,CAAAb,QAAA,eAC3E7B,KAAA,QAAA6B,QAAA,eACE/B,IAAA,OAAA+B,QAAA,CAAI,OAAK,CAAI,CAAC,CACbvB,KAAK,CAACqC,MAAM,GAAK,CAAC,cACjB7C,IAAA,QAAKgC,KAAK,CAAE,CAAEG,OAAO,CAAE,MAAM,CAAEW,SAAS,CAAE,QAAQ,CAAEC,KAAK,CAAE,MAAO,CAAE,CAAAhB,QAAA,CAAC,gBAErE,CAAK,CAAC,cAEN/B,IAAA,QAAKgC,KAAK,CAAE,CAAEI,OAAO,CAAE,MAAM,CAAEY,aAAa,CAAE,QAAQ,CAAEJ,GAAG,CAAE,MAAO,CAAE,CAAAb,QAAA,CACnEvB,KAAK,CAACyC,GAAG,CAAEvB,IAAI,eACdxB,KAAA,QAEEsC,OAAO,CAAEA,CAAA,GAAMf,eAAe,CAACC,IAAI,CAAE,CACrCM,KAAK,CAAE,CACLG,OAAO,CAAE,MAAM,CACfe,MAAM,CAAE,CAAAxC,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEiB,EAAE,IAAKD,IAAI,CAACC,EAAE,CAAG,mBAAmB,CAAG,gBAAgB,CAC7EwB,YAAY,CAAE,KAAK,CACnBC,MAAM,CAAE,SAAS,CACjBC,eAAe,CAAE,CAAA3C,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEiB,EAAE,IAAKD,IAAI,CAACC,EAAE,CAAG,SAAS,CAAG,MAC9D,CAAE,CAAAI,QAAA,eAEF/B,IAAA,OAAIgC,KAAK,CAAE,CAAEE,MAAM,CAAE,CAAE,CAAE,CAAAH,QAAA,CAAEL,IAAI,CAAC4B,KAAK,CAAK,CAAC,cAC3CpD,KAAA,MAAG8B,KAAK,CAAE,CAAEe,KAAK,CAAE,MAAM,CAAEQ,QAAQ,CAAE,MAAM,CAAErB,MAAM,CAAE,OAAQ,CAAE,CAAAH,QAAA,EAC5DL,IAAI,CAAC8B,cAAc,CAAC,KAAG,CAAC9B,IAAI,CAAC+B,UAAU,CAAC,kBAC3C,EAAG,CAAC,GAbC/B,IAAI,CAACC,EAcP,CACN,CAAC,CACC,CACN,EACE,CAAC,cAEN3B,IAAA,QAAA+B,QAAA,CACGrB,YAAY,cACXR,KAAA,QAAA6B,QAAA,eACE/B,IAAA,OAAA+B,QAAA,CAAKrB,YAAY,CAAC4C,KAAK,CAAK,CAAC,cAC7BtD,IAAA,MAAGgC,KAAK,CAAE,CAAEe,KAAK,CAAE,MAAO,CAAE,CAAAhB,QAAA,CAAErB,YAAY,CAACgD,WAAW,EAAI,gBAAgB,CAAI,CAAC,cAC/ExD,KAAA,QAAK8B,KAAK,CAAE,CAAE2B,SAAS,CAAE,MAAO,CAAE,CAAA5B,QAAA,eAChC/B,IAAA,OAAA+B,QAAA,CAAI,OAAK,CAAI,CAAC,cACd/B,IAAA,CAACF,QAAQ,EACPc,KAAK,CAAEA,KAAM,CACbgD,QAAQ,CAAEhC,gBAAiB,CAC3BiC,QAAQ,CAAEA,CAAA,GAAM,CAAC,CAAE,CACpB,CAAC,EACC,CAAC,EACH,CAAC,cAEN7D,IAAA,QAAKgC,KAAK,CAAE,CAAEG,OAAO,CAAE,MAAM,CAAEW,SAAS,CAAE,QAAQ,CAAEC,KAAK,CAAE,MAAO,CAAE,CAAAhB,QAAA,CAAC,+BAErE,CAAK,CACN,CACE,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA5B,uBAAuB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}